# ==============================================================================
# DSCOMMERCE - Base Configuration (Common to All Profiles)
# ==============================================================================
# Contains ONLY shared settings across all environments
# Environment-specific configs should be in application-{profile}.yaml
# ==============================================================================

spring:
  application:
    name: dscommerce

  # Active profile (override via SPRING_PROFILES_ACTIVE env var)
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  # JPA/Hibernate - Common settings
  jpa:
    properties:
      hibernate:
        format_sql: true  # Format SQL in console for debugging

    # WARNING: Consider disabling in production if using async patterns
    open-in-view: true

# Security - OAuth2 and JWT
security:
  client-id: ${CLIENT_ID:myclientid}
  client-secret: ${CLIENT_SECRET:myclientsecret}
  jwt:
    duration: ${JWT_DURATION:86400}  # Token duration in seconds (86400 = 24h)

# CORS - Cross-Origin Resource Sharing
cors:
  # Comma-separated allowed origins
  # Dev: localhost with common frontend ports
  # Prod: Override with real domains
  origins: ${CORS_ORIGINS:http://localhost:3000,http://localhost:5173}

# Logging - Base configuration
logging:
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

  level:
    root: INFO
    com.dscommerce: INFO
    org.springframework.web: INFO
    org.springframework.security: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.orm.jdbc.bind: TRACE

# Server
server:
  port: ${SERVER_PORT:8080}

  # Error handling
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: on_param
    include-exception: false

# Actuator (uncomment if spring-boot-starter-actuator is added)
# management:
#   endpoints:
#     web:
#       exposure:
#         include: health,info
#   endpoint:
#     health:
#       show-details: when-authorized